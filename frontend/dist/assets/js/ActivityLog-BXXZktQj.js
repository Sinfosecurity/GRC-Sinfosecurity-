import{r as e,j as s}from"./react-vendor-CdlOkkQ6.js";import{B as r,T as t,G as a,e as i,f as l,h as n,aa as o,ab as c,ac as d,ad as x,_ as u,$ as h,a0 as j,a1 as g,a2 as m,a3 as p,a4 as b,al as f,Q as v,am as y,an as S,ao as w,ap as D,H as I}from"./mui-vendor-ke4DnebM.js";import"./vendor-DaIW0aQl.js";const C=e=>e.includes("create")?"#43e97b":e.includes("delete")?"#f5576c":e.includes("update")?"#00f2fe":"#667eea";function W(){const[W,N]=e.useState([]),[T,A]=e.useState(!0),[_,L]=e.useState("all"),[R,z]=e.useState("all"),[k,U]=e.useState("");e.useEffect(()=>{O()},[]);const O=async()=>{try{A(!0);const e=[{id:"1",timestamp:(new Date).toISOString(),userId:"user1",userName:"John Doe",action:"create_risk",resourceType:"Risk",resourceId:"risk_123",resourceName:"Data Breach Risk",status:"success",details:"Created new risk assessment"},{id:"2",timestamp:new Date(Date.now()-9e5).toISOString(),userId:"user2",userName:"Jane Smith",action:"update_policy",resourceType:"Policy",resourceId:"policy_456",resourceName:"Data Classification Policy",status:"success",details:"Updated policy version to 2.2"},{id:"3",timestamp:new Date(Date.now()-18e5).toISOString(),userId:"user3",userName:"Mike Johnson",action:"create_incident",resourceType:"Incident",resourceId:"inc_789",resourceName:"Phishing Email Detection",status:"success",details:"Reported new security incident"},{id:"4",timestamp:new Date(Date.now()-27e5).toISOString(),userId:"user1",userName:"John Doe",action:"delete_document",resourceType:"Document",resourceId:"doc_321",resourceName:"Old Audit Report",status:"success",details:"Deleted outdated document"},{id:"5",timestamp:new Date(Date.now()-36e5).toISOString(),userId:"user2",userName:"Jane Smith",action:"update_control",resourceType:"Control",resourceId:"ctrl_555",resourceName:"Multi-Factor Authentication",status:"success",details:"Updated control effectiveness rating"}];N(e)}catch(e){}finally{A(!1)}},J=W.filter(e=>{var s,r;const t="all"===_||e.action.includes(_),a="all"===R||e.resourceType===R,i=!k||e.userName.toLowerCase().includes(k.toLowerCase())||(null==(s=e.resourceName)?void 0:s.toLowerCase().includes(k.toLowerCase()))||(null==(r=e.details)?void 0:r.toLowerCase().includes(k.toLowerCase()));return t&&a&&i}),P={total:W.length,last24h:W.filter(e=>new Date(e.timestamp)>new Date(Date.now()-864e5)).length,uniqueUsers:new Set(W.map(e=>e.userId)).size};return s.jsxs(r,{children:[s.jsx(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:s.jsxs(r,{children:[s.jsx(t,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Activity Log"}),s.jsx(t,{variant:"body1",sx:{color:"rgba(255,255,255,0.7)"},children:"Complete audit trail of all system activities"})]})}),s.jsxs(a,{container:!0,spacing:3,sx:{mb:4},children:[s.jsx(a,{item:!0,xs:12,sm:4,children:s.jsx(i,{sx:{bgcolor:"#1a1f3a",border:"1px solid rgba(255,255,255,0.1)"},children:s.jsxs(l,{children:[s.jsx(t,{variant:"h3",sx:{color:"#667eea",fontWeight:700},children:P.total}),s.jsx(t,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:"Total Activities"})]})})}),s.jsx(a,{item:!0,xs:12,sm:4,children:s.jsx(i,{sx:{bgcolor:"#1a1f3a",border:"1px solid rgba(255,255,255,0.1)"},children:s.jsxs(l,{children:[s.jsx(t,{variant:"h3",sx:{color:"#00f2fe",fontWeight:700},children:P.last24h}),s.jsx(t,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:"Last 24 Hours"})]})})}),s.jsx(a,{item:!0,xs:12,sm:4,children:s.jsx(i,{sx:{bgcolor:"#1a1f3a",border:"1px solid rgba(255,255,255,0.1)"},children:s.jsxs(l,{children:[s.jsx(t,{variant:"h3",sx:{color:"#43e97b",fontWeight:700},children:P.uniqueUsers}),s.jsx(t,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:"Active Users"})]})})})]}),s.jsx(i,{sx:{bgcolor:"#1a1f3a",border:"1px solid rgba(255,255,255,0.1)",mb:3},children:s.jsx(l,{children:s.jsxs(a,{container:!0,spacing:2,children:[s.jsx(a,{item:!0,xs:12,md:4,children:s.jsx(n,{fullWidth:!0,label:"Search",value:k,onChange:e=>U(e.target.value),placeholder:"Search by user, resource, or description..."})}),s.jsx(a,{item:!0,xs:12,md:4,children:s.jsxs(o,{fullWidth:!0,children:[s.jsx(c,{children:"Action Type"}),s.jsxs(d,{value:_,onChange:e=>L(e.target.value),label:"Action Type",children:[s.jsx(x,{value:"all",children:"All Actions"}),s.jsx(x,{value:"create",children:"Create"}),s.jsx(x,{value:"update",children:"Update"}),s.jsx(x,{value:"delete",children:"Delete"}),s.jsx(x,{value:"view",children:"View"})]})]})}),s.jsx(a,{item:!0,xs:12,md:4,children:s.jsxs(o,{fullWidth:!0,children:[s.jsx(c,{children:"Resource Type"}),s.jsxs(d,{value:R,onChange:e=>z(e.target.value),label:"Resource Type",children:[s.jsx(x,{value:"all",children:"All Resources"}),s.jsx(x,{value:"Risk",children:"Risks"}),s.jsx(x,{value:"Policy",children:"Policies"}),s.jsx(x,{value:"Incident",children:"Incidents"}),s.jsx(x,{value:"Document",children:"Documents"}),s.jsx(x,{value:"Control",children:"Controls"})]})]})})]})})}),s.jsx(i,{sx:{bgcolor:"#1a1f3a",border:"1px solid rgba(255,255,255,0.1)"},children:s.jsxs(l,{children:[s.jsx(t,{variant:"h6",sx:{mb:3,fontWeight:600},children:"Activity Timeline"}),s.jsx(u,{component:h,sx:{bgcolor:"transparent"},children:s.jsxs(j,{children:[s.jsx(g,{children:s.jsxs(m,{sx:{bgcolor:"rgba(255,255,255,0.05)"},children:[s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)",fontWeight:600},children:"Timestamp"}),s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)",fontWeight:600},children:"User"}),s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)",fontWeight:600},children:"Action"}),s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)",fontWeight:600},children:"Resource"}),s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)",fontWeight:600},children:"Details"}),s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)",fontWeight:600},children:"Status"})]})}),s.jsx(b,{children:T?s.jsx(m,{children:s.jsx(p,{colSpan:6,sx:{textAlign:"center",color:"rgba(255,255,255,0.5)",py:4},children:"Loading activity logs..."})}):0===J.length?s.jsx(m,{children:s.jsx(p,{colSpan:6,sx:{textAlign:"center",color:"rgba(255,255,255,0.5)",py:4},children:"No activities found"})}):J.map(e=>{return s.jsxs(m,{sx:{"&:hover":{bgcolor:"rgba(102, 126, 234, 0.05)"}},children:[s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)"},children:new Date(e.timestamp).toLocaleString()}),s.jsx(p,{children:s.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(f,{sx:{color:"#667eea",fontSize:20}}),s.jsx(t,{variant:"body2",sx:{color:"white",fontWeight:600},children:e.userName})]})}),s.jsx(p,{children:s.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(r,{sx:{color:C(e.action)},children:(a=e.action,a.includes("create")?s.jsx(y,{sx:{fontSize:18}}):a.includes("delete")?s.jsx(S,{sx:{fontSize:18}}):a.includes("update")?s.jsx(w,{sx:{fontSize:18}}):a.includes("view")?s.jsx(D,{sx:{fontSize:18}}):s.jsx(I,{sx:{fontSize:18}}))}),s.jsx(v,{label:e.action.replace("_"," ").toUpperCase(),size:"small",sx:{bgcolor:`${C(e.action)}20`,color:C(e.action),fontWeight:600}})]})}),s.jsx(p,{children:s.jsxs(r,{children:[s.jsx(t,{variant:"body2",sx:{color:"white",fontWeight:600},children:e.resourceName}),s.jsx(t,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)"},children:e.resourceType})]})}),s.jsx(p,{sx:{color:"rgba(255,255,255,0.7)"},children:e.details}),s.jsx(p,{children:s.jsx(v,{label:e.status,size:"small",sx:{bgcolor:"success"===e.status?"rgba(67, 233, 123, 0.2)":"rgba(245, 87, 108, 0.2)",color:"success"===e.status?"#43e97b":"#f5576c"}})})]},e.id);var a})})]})})]})})]})}export{W as default};
